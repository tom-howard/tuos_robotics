# Bash profile with ROS settings for the Turtlebot3 robot

# ROS settings for TurtleBot3 (localhost)
source /opt/ros/noetic/setup.bash
source ~/tb3_ws/install/setup.bash
export TURTLEBOT3_MODEL=waffle

if [ ! -f ~/.tuos/waffle_number ]; then
    cp /home/Shared/laptop_number ~/.tuos/waffle_number
fi 

if [ ! -f ~/.tuos/robot_mode ]; then
    echo "robot" > ~/.tuos/robot_mode
elif grep -qi "robot" ~/.tuos/robot_mode; then
    RDS="dia-waffle$WAFFLE_NO:11811;dia-waffle$WAFFLE_NO:11888"
    LHOST_ONLY=0
elif grep -qi "sim" ~/.tuos/robot_mode; then
    RDS=""
    LHOST_ONLY=1
else
    RDS="dia-waffle$WAFFLE_NO:11811;dia-waffle$WAFFLE_NO:11888"
    LHOST_ONLY=0
fi

export ROS_DISCOVERY_SERVER=$RDS
export ROS_LOCALHOST_ONLY=$LHOST_ONLY
export ROS_HOSTNAME=$(hostname)
